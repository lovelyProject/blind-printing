import{_ as g,c as u,o as a,a as r,r as j,n as K,b as e,p as q,d as P,t as d,e as S,w as f,u as y,F as I,f as D,g as p,h as E,T as R,i as x,j as Q,k as U,l as A,m as k,q as W,s as m}from"./index-85ba11b5.js";const X={__name:"TheLetter",props:{status:{type:String,required:!0}},setup(t){const c=t,s=u(()=>({letter_correct:c.status==="correct",letter_error:c.status==="error"}));return(n,l)=>(a(),r("span",{class:K(["letter",s.value])},[j(n.$slots,"default",{},void 0,!0)],2))}},Y=g(X,[["__scopeId","data-v-6e6a7384"]]);const Z={class:"button"},ee={__name:"AppButton",emits:["resetEverything"],setup(t,{emit:c}){function s(){c("resetEverything")}return(n,l)=>(a(),r("div",Z,[e("button",{class:"button__item",onClick:s},[j(n.$slots,"default",{},void 0,!0)])]))}},O=g(ee,[["__scopeId","data-v-68c3b3e0"]]);const te={},se=t=>(q("data-v-0307e79c"),t=t(),P(),t),ae={class:"loadingio-spinner-eclipse-dnymn4sgsj8"},ce=se(()=>e("div",{class:"ldio-2hwih29r73o"},[e("div")],-1)),oe=[ce];function ne(t,c){return a(),r("div",ae,oe)}const re=g(te,[["render",ne],["__scopeId","data-v-0307e79c"]]);const _e={class:"card"},le={class:"card__item"},ie=["src","alt"],ue={class:"color-black card__title"},de={class:"card__item"},ve={class:"color-black card__text"},he={class:"color-black card__text"},me={__name:"TheCard",props:{card:{type:Object,required:!0}},setup(t){return(c,s)=>(a(),r("div",_e,[e("div",le,[e("img",{class:"card__icon",src:t.card.icon,alt:t.card.alt},null,8,ie),e("h3",ue,d(t.card.title),1)]),e("div",de,[e("span",ve,d(t.card.value),1),e("span",he,d(t.card.measure),1)])]))}},pe=g(me,[["__scopeId","data-v-a3be21a8"]]),fe="/assets/firework-31d4e099.svg";const ge=t=>(q("data-v-587835e8"),t=t(),P(),t),xe={class:"modal"},ye={class:"modal__box"},Se=["src"],Te=ge(()=>e("h2",{class:"color-black modal__title"},"Поздравляем!",-1)),$e=`Вы успешно перепечатали текст.
Вот ваши результаты:`,be={__name:"TheModal",props:{cardsState:{type:Object,required:!0}},emits:["resetEverything"],setup(t,{emit:c}){function s(){c("resetEverything")}return(n,l)=>(a(),r("div",xe,[S(R,{name:"modal"},{default:f(()=>[e("div",ye,[e("img",{class:"modal__icon",src:y(fe)},null,8,Se),Te,e("p",{class:"color-black modal__text"},d($e)),(a(!0),r(I,null,D(t.cardsState,v=>(a(),p(pe,{key:v.id,card:v},null,8,["card"]))),128)),S(O,{onResetEverything:s},{default:f(()=>[E("Начать заново")]),_:1})])]),_:1})]))}},ke=g(be,[["__scopeId","data-v-587835e8"]]),F="/assets/aim-44ff0b9f.svg",V="/assets/speed-c48f9367.svg",Ie="/assets/time-557cbecb.svg";const Ee={class:"flex"},we={class:"text"},Le=["value"],Ce={class:"stats"},Me={class:"stats__item"},Be={class:"item__header"},Ne=["src"],Ae=e("h4",{class:"item-title"},"Точность",-1),Fe={class:"item-text"},Ve={class:"stats__item"},je={class:"item__header"},qe=["src"],Pe=e("h4",{class:"item-title"},"Скорость",-1),De={class:"item-text"},Oe={__name:"Main",setup(t){const c={accuracy:{id:1,title:"Точность",icon:F,alt:"Точность",measure:"%",value:0},speed:{id:2,title:"Скорость",icon:V,alt:"Скорость",measure:"зн/м",value:0},time:{id:3,title:"Время",icon:Ie,alt:"Время",measure:"cек",value:0}},s=x(""),n=x(null),l=x("0");let v,T=!1,$=x(!1);const o=Q(),z=u(()=>o.state.textServiceStore.isLoading),b=u(()=>{var _;return(_=o.state.textServiceStore)==null?void 0:_.textState}),w=u(()=>{var _;return(_=o.state.textServiceStore)==null?void 0:_.textFromService}),L=u(()=>(o.state.textServiceStore.countErrors*100/w.value.length).toFixed(2)),C=u(()=>isNaN(Number(L.value))?100:100-L.value),M=u(()=>o.state.textServiceStore.startPrintingTime);function B(){return M.value?Math.round((new Date().getTime()-M.value)/1e3):1}function G(){return Number(s.value.length*60/B())}function N(){clearInterval(v),s.value="",l.value="0",$.value=!1,o.dispatch(A.getText),n.value.focus()}U(()=>{o.dispatch(A.getText),n.value.focus()});function H(_){const h=_.target.value;if(w.value.length-1===s.value.length&&(clearInterval(v),c.time.value=B(),c.accuracy.value=C.value,c.speed.value=l.value,$.value=!0),h===""){s.value="",o.commit(m.clearAllStatuses),n.value.focus();return}const i=h.length-1;if(s.value=h,b.value[i].value.toLowerCase()!==h[i].toLowerCase()){if(s.value=h.slice(0,-1),!T){T=!0,o.commit(m.changeLetterStatus,{index:i,status:"error"}),o.commit(m.incrementErrors);return}return n.value.focus(),null}s.value.length===1&&(o.commit(m.setStartTime),v=setInterval(()=>{l.value=Math.round(G())},1e3)),T=!1,o.commit(m.changeLetterStatus,{index:i,status:"correct"}),n.value.focus()}return(_,h)=>(a(),r("div",Ee,[e("div",we,[b.value?(a(),r(I,{key:0},[(a(!0),r(I,null,D(b.value,(i,J)=>(a(),p(Y,{key:J,status:i.status},{default:f(()=>[E(d(i.value),1)]),_:2},1032,["status"]))),128)),e("input",{class:"text__target",type:"text",value:s.value,ref_key:"target",ref:n,onInput:H},null,40,Le)],64)):k("",!0),z.value?(a(),p(re,{key:1})):k("",!0)]),e("div",Ce,[e("div",Me,[e("div",Be,[e("img",{class:"stats__icon",src:y(F),alt:"Точность"},null,8,Ne),Ae]),e("span",Fe,d(C.value)+"%",1)]),e("div",Ve,[e("div",je,[e("img",{class:"stats__icon",src:y(V),alt:"Скорость"},null,8,qe),Pe]),e("span",De,d(l.value)+" зн/мин",1)]),S(O,{onResetEverything:N},{default:f(()=>[E("Заново")]),_:1}),(a(),p(W,{to:"body"},[S(R,null,{default:f(()=>[y($)?(a(),p(ke,{key:0,cardsState:c,onResetEverything:N})):k("",!0)]),_:1})]))])]))}};export{Oe as default};
