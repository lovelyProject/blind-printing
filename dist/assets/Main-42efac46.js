import{_ as f,c as u,o as a,a as r,r as j,n as K,b as e,p as q,d as P,t as d,e as S,w as g,u as y,F as I,f as D,g as p,h as E,T as R,i as x,j as Q,k as U,l as A,m as k,q as W,s as m}from"./index-7d9786de.js";const X={__name:"TheLetter",props:{status:{type:String,required:!0}},setup(t){const c=t,s=u(()=>({letter_correct:c.status==="correct",letter_error:c.status==="error"}));return(o,l)=>(a(),r("span",{class:K(["letter",s.value])},[j(o.$slots,"default",{},void 0,!0)],2))}},Y=f(X,[["__scopeId","data-v-6e6a7384"]]);const Z={class:"button"},ee={__name:"AppButton",emits:["resetEverything"],setup(t,{emit:c}){function s(){c("resetEverything")}return(o,l)=>(a(),r("div",Z,[e("button",{class:"button__item",onClick:s},[j(o.$slots,"default",{},void 0,!0)])]))}},O=f(ee,[["__scopeId","data-v-68c3b3e0"]]);const te={},se=t=>(q("data-v-0307e79c"),t=t(),P(),t),ae={class:"loadingio-spinner-eclipse-dnymn4sgsj8"},ce=se(()=>e("div",{class:"ldio-2hwih29r73o"},[e("div")],-1)),ne=[ce];function oe(t,c){return a(),r("div",ae,ne)}const re=f(te,[["render",oe],["__scopeId","data-v-0307e79c"]]);const ie={class:"card"},le={class:"card__item"},_e=["src","alt"],ue={class:"color-black card__title"},de={class:"card__item"},ve={class:"color-black card__text"},he={class:"color-black card__text"},me={__name:"TheCard",props:{card:{type:Object,required:!0}},setup(t){return(c,s)=>(a(),r("div",ie,[e("div",le,[e("img",{class:"card__icon",src:t.card.icon,alt:t.card.alt},null,8,_e),e("h3",ue,d(t.card.title),1)]),e("div",de,[e("span",ve,d(t.card.value),1),e("span",he,d(t.card.measure),1)])]))}},pe=f(me,[["__scopeId","data-v-a3be21a8"]]),ge="/blind-printing/assets/firework-31d4e099.svg";const fe=t=>(q("data-v-587835e8"),t=t(),P(),t),xe={class:"modal"},ye={class:"modal__box"},Se=["src"],be=fe(()=>e("h2",{class:"color-black modal__title"},"Поздравляем!",-1)),Te=`Вы успешно перепечатали текст.
Вот ваши результаты:`,$e={__name:"TheModal",props:{cardsState:{type:Object,required:!0}},emits:["resetEverything"],setup(t,{emit:c}){function s(){c("resetEverything")}return(o,l)=>(a(),r("div",xe,[S(R,{name:"modal"},{default:g(()=>[e("div",ye,[e("img",{class:"modal__icon",src:y(ge)},null,8,Se),be,e("p",{class:"color-black modal__text"},d(Te)),(a(!0),r(I,null,D(t.cardsState,v=>(a(),p(pe,{key:v.id,card:v},null,8,["card"]))),128)),S(O,{onResetEverything:s},{default:g(()=>[E("Начать заново")]),_:1})])]),_:1})]))}},ke=f($e,[["__scopeId","data-v-587835e8"]]),F="/blind-printing/assets/aim-44ff0b9f.svg",V="/blind-printing/assets/speed-c48f9367.svg",Ie="/blind-printing/assets/time-557cbecb.svg";const Ee={class:"flex"},we={class:"text"},Le=["value"],Ce={class:"stats"},Me={class:"stats__item"},Be={class:"item__header"},Ne=["src"],Ae=e("h4",{class:"item-title"},"Точность",-1),Fe={class:"item-text"},Ve={class:"stats__item"},je={class:"item__header"},qe=["src"],Pe=e("h4",{class:"item-title"},"Скорость",-1),De={class:"item-text"},Oe={__name:"Main",setup(t){const c={accuracy:{id:1,title:"Точность",icon:F,alt:"Точность",measure:"%",value:0},speed:{id:2,title:"Скорость",icon:V,alt:"Скорость",measure:"зн/м",value:0},time:{id:3,title:"Время",icon:Ie,alt:"Время",measure:"cек",value:0}},s=x(""),o=x(null),l=x("0");let v,b=!1,T=x(!1);const n=Q(),z=u(()=>n.state.textServiceStore.isLoading),$=u(()=>{var i;return(i=n.state.textServiceStore)==null?void 0:i.textState}),w=u(()=>{var i;return(i=n.state.textServiceStore)==null?void 0:i.textFromService}),L=u(()=>(n.state.textServiceStore.countErrors*100/w.value.length).toFixed(2)),C=u(()=>isNaN(Number(L.value))?100:100-L.value),M=u(()=>n.state.textServiceStore.startPrintingTime);function B(){return M.value?Math.round((new Date().getTime()-M.value)/1e3):1}function G(){return Number(s.value.length*60/B())}function N(){clearInterval(v),s.value="",l.value="0",T.value=!1,n.dispatch(A.getText),o.value.focus()}U(()=>{n.dispatch(A.getText),o.value.focus()});function H(i){const h=i.target.value;if(w.value.length-1===s.value.length&&(clearInterval(v),c.time.value=B(),c.accuracy.value=C.value,c.speed.value=l.value,T.value=!0),h===""){s.value="",n.commit(m.clearAllStatuses),o.value.focus();return}const _=h.length-1;if(s.value=h,$.value[_].value.toLowerCase()!==h[_].toLowerCase()){if(s.value=h.slice(0,-1),!b){b=!0,n.commit(m.changeLetterStatus,{index:_,status:"error"}),n.commit(m.incrementErrors);return}return o.value.focus(),null}s.value.length===1&&(n.commit(m.setStartTime),v=setInterval(()=>{l.value=Math.round(G())},1e3)),b=!1,n.commit(m.changeLetterStatus,{index:_,status:"correct"}),o.value.focus()}return(i,h)=>(a(),r("div",Ee,[e("div",we,[$.value?(a(),r(I,{key:0},[(a(!0),r(I,null,D($.value,(_,J)=>(a(),p(Y,{key:J,status:_.status},{default:g(()=>[E(d(_.value),1)]),_:2},1032,["status"]))),128)),e("input",{class:"text__target",type:"text",value:s.value,ref_key:"target",ref:o,onInput:H},null,40,Le)],64)):k("",!0),z.value?(a(),p(re,{key:1})):k("",!0)]),e("div",Ce,[e("div",Me,[e("div",Be,[e("img",{class:"stats__icon",src:y(F),alt:"Точность"},null,8,Ne),Ae]),e("span",Fe,d(C.value)+"%",1)]),e("div",Ve,[e("div",je,[e("img",{class:"stats__icon",src:y(V),alt:"Скорость"},null,8,qe),Pe]),e("span",De,d(l.value)+" зн/мин",1)]),S(O,{onResetEverything:N},{default:g(()=>[E("Заново")]),_:1}),(a(),p(W,{to:"body"},[S(R,null,{default:g(()=>[y(T)?(a(),p(ke,{key:0,cardsState:c,onResetEverything:N})):k("",!0)]),_:1})]))])]))}};export{Oe as default};
